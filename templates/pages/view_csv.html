{{template "base.html" .}}

{{define "content"}}
    <article class="margin-end-6xl">

        {{template "page-header" .}}

        <div class="">
            {{if .CSVData.Records}}
                <div class="scroll-horizontal">
                    <table class="table-striped">
                        {{if gt (len .CSVData.Records) 0}}
                            {{$headers := index .CSVData.Records 0}}
                            <thead>
                            <tr>
                                <th class="row-number">#</th>
                                {{range $colIndex, $header := $headers}}
                                    <th class="csv-header">
                                        {{if $.CSVData.Metadata.Headers}}
                                            {{if lt $colIndex (len $.CSVData.Metadata.Headers)}}
                                                {{index $.CSVData.Metadata.Headers $colIndex}}
                                            {{else}}
                                                {{$header}}
                                            {{end}}
                                        {{else}}
                                            {{$header}}
                                        {{end}}
                                    </th>
                                {{end}}
                            </tr>
                            </thead>
                        {{end}}
                        <tbody>
                        {{range $rowIndex, $record := .CSVData.Records}}
                            {{if gt $rowIndex 0}} {{/* Skip header row */}}
                            <tr class="csv-row">
                                <td class="row-number">{{$rowIndex}}</td>
                                {{range $colIndex, $cell := $record}}
                                    <td class="csv-cell">{{$cell}}</td>
                                {{end}}
                            </tr>
                            {{end}}
                        {{end}}
                        </tbody>
                    </table>
                </div>
            {{else}}
                <div class="empty-state">
                    <p>No data in this CSV file.</p>
                </div>
            {{end}}
        </div>
    </article>

    <style>
        /*.csv-container {*/
        /*    overflow-x: auto;*/
        /*    border: 1px solid var(--color-border);*/
        /*    border-radius: var(--radius-md);*/
        /*}*/

        /*.csv-table {*/
        /*    width: 100%;*/
        /*    min-width: 600px;*/
        /*    border-collapse: collapse;*/
        /*    font-size: var(--size-sm);*/
        /*}*/

        /*.csv-table th,*/
        /*.csv-table td {*/
        /*    border: 1px solid var(--color-border-light);*/
        /*    padding: var(--space-xs);*/
        /*    text-align: left;*/
        /*    vertical-align: top;*/
        /*}*/

        /*.csv-table th {*/
        /*    background-color: var(--color-bg-subtle);*/
        /*    font-weight: 600;*/
        /*    position: sticky;*/
        /*    top: 0;*/
        /*    z-index: 1;*/
        /*}*/

        /*.csv-cell {*/
        /*    max-width: 200px;*/
        /*    word-wrap: break-word;*/
        /*}*/

        /*.row-number {*/
        /*    background-color: var(--color-bg-subtle);*/
        /*    color: var(--color-text-muted);*/
        /*    font-weight: 600;*/
        /*    text-align: center;*/
        /*    width: 60px;*/
        /*}*/

        /*.empty-state {*/
        /*    text-align: center;*/
        /*    padding: var(--space-xl);*/
        /*    color: var(--color-text-muted);*/
        /*}*/

        /*.csv-description {*/
        /*    font-size: var(--size-md);*/
        /*}*/

        /*.csv-stats {*/
        /*    border-left: 3px solid var(--color-border);*/
        /*    padding-left: var(--space-sm);*/
        /*}*/
    </style>
{{end}}
